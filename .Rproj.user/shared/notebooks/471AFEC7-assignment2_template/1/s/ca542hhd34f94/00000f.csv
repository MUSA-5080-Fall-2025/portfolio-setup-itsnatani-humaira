"0","# Load required packages"
"0","library(sf)"
"0","library(tidyverse)"
"0","library(tigris)"
"0","library(tidycensus)"
"0","library(dplyr)"
"0","library(tidyr)"
"0","library(scales)"
"0","library(patchwork)"
"0","library(here)"
"0",""
"0","# Set your Census API key"
"0","census_api_key(Sys.getenv(""28da3bddd17210421250559be63d8c9379ee190c""))"
"0",""
"0","# Load spatial data"
"0","pa_counties <- st_read(here(""C:/NATAN/PENN/2025 FALL/Public Policy Analytics/portfolio-setup-itsnatani-humaira/assignments/assignment2/scripts/data/Pennsylvania_County_Boundaries.shp""))"
"1","Reading layer `"
"1","Pennsylvania_County_Boundaries"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","C:\NATAN\PENN\2025 FALL\Public Policy Analytics\portfolio-setup-itsnatani-humaira\assignments\assignment2\scripts\data\Pennsylvania_County_Boundaries.shp"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","ESRI Shapefile"
"1","'"
"1","
"
"1","Simple feature collection with 67 features and 19 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -8963377 ymin: 4825316 xmax: -8314404 ymax: 5201413"
"1","
"
"1","Projected CRS: WGS 84 / Pseudo-Mercator
"
"0","hospitals <- st_read(here(""C:/NATAN/PENN/2025 FALL/Public Policy Analytics/portfolio-setup-itsnatani-humaira/assignments/assignment2/scripts/data/hospitals.geojson""))"
"1","Reading layer `"
"1","hospitals"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","C:\NATAN\PENN\2025 FALL\Public Policy Analytics\portfolio-setup-itsnatani-humaira\assignments\assignment2\scripts\data\hospitals.geojson"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","GeoJSON"
"1","'"
"1","
"
"1","Simple feature collection with 223 features and 11 fields"
"1","
"
"1","Geometry type: POINT
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -80.49621 ymin: 39.75163 xmax: -74.86704 ymax: 42.13403"
"1","
"
"1","Geodetic CRS:  WGS 84
"
"0","census_tracts <- tracts(state = ""PA"", cb = TRUE)"
"1","  |                                                                                                       "
"1","  |                                                                                                 |   0%"
"1","  |                                                                                                       "
"1","  |=                                                                                                |   1%"
"1","  |                                                                                                       "
"1","  |==                                                                                               |   2%"
"1","  |                                                                                                       "
"1","  |=====                                                                                            |   5%"
"1","  |                                                                                                       "
"1","  |======                                                                                           |   6%"
"1","  |                                                                                                       "
"1","  |======                                                                                           |   7%"
"1","  |                                                                                                       "
"1","  |=======                                                                                          |   7%"
"1","  |                                                                                                       "
"1","  |=======                                                                                          |   8%"
"1","  |                                                                                                       "
"1","  |========                                                                                         |   8%"
"1","  |                                                                                                       "
"1","  |=========                                                                                        |   9%"
"1","  |                                                                                                       "
"1","  |=========                                                                                        |  10%"
"1","  |                                                                                                       "
"1","  |==========                                                                                       |  10%"
"1","  |                                                                                                       "
"1","  |==========                                                                                       |  11%"
"1","  |                                                                                                       "
"1","  |===========                                                                                      |  11%"
"1","  |                                                                                                       "
"1","  |===========                                                                                      |  12%"
"1","  |                                                                                                       "
"1","  |============                                                                                     |  13%"
"1","  |                                                                                                       "
"1","  |=============                                                                                    |  13%"
"1","  |                                                                                                       "
"1","  |==============                                                                                   |  14%"
"1","  |                                                                                                       "
"1","  |================                                                                                 |  16%"
"1","  |                                                                                                       "
"1","  |==================                                                                               |  18%"
"1","  |                                                                                                       "
"1","  |===================                                                                              |  19%"
"1","  |                                                                                                       "
"1","  |====================                                                                             |  21%"
"1","  |                                                                                                       "
"1","  |======================                                                                           |  23%"
"1","  |                                                                                                       "
"1","  |=======================                                                                          |  24%"
"1","  |                                                                                                       "
"1","  |========================                                                                         |  25%"
"1","  |                                                                                                       "
"1","  |=========================                                                                        |  26%"
"1","  |                                                                                                       "
"1","  |==========================                                                                       |  27%"
"1","  |                                                                                                       "
"1","  |===========================                                                                      |  28%"
"1","  |                                                                                                       "
"1","  |==============================                                                                   |  31%"
"1","  |                                                                                                       "
"1","  |===============================                                                                  |  32%"
"1","  |                                                                                                       "
"1","  |================================                                                                 |  33%"
"1","  |                                                                                                       "
"1","  |=================================                                                                |  34%"
"1","  |                                                                                                       "
"1","  |==================================                                                               |  35%"
"1","  |                                                                                                       "
"1","  |====================================                                                             |  37%"
"1","  |                                                                                                       "
"1","  |=====================================                                                            |  38%"
"1","  |                                                                                                       "
"1","  |======================================                                                           |  39%"
"1","  |                                                                                                       "
"1","  |=======================================                                                          |  40%"
"1","  |                                                                                                       "
"1","  |========================================                                                         |  41%"
"1","  |                                                                                                       "
"1","  |==========================================                                                       |  43%"
"1","  |                                                                                                       "
"1","  |===========================================                                                      |  44%"
"1","  |                                                                                                       "
"1","  |============================================                                                     |  45%"
"1","  |                                                                                                       "
"1","  |=============================================                                                    |  46%"
"1","  |                                                                                                       "
"1","  |==============================================                                                   |  47%"
"1","  |                                                                                                       "
"1","  |===============================================                                                  |  48%"
"1","  |                                                                                                       "
"1","  |================================================                                                 |  49%"
"1","  |                                                                                                       "
"1","  |================================================                                                 |  50%"
"1","  |                                                                                                       "
"1","  |=================================================                                                |  51%"
"1","  |                                                                                                       "
"1","  |==================================================                                               |  52%"
"1","  |                                                                                                       "
"1","  |===================================================                                              |  53%"
"1","  |                                                                                                       "
"1","  |====================================================                                             |  54%"
"1","  |                                                                                                       "
"1","  |=====================================================                                            |  55%"
"1","  |                                                                                                       "
"1","  |======================================================                                           |  56%"
"1","  |                                                                                                       "
"1","  |=======================================================                                          |  57%"
"1","  |                                                                                                       "
"1","  |========================================================                                         |  58%"
"1","  |                                                                                                       "
"1","  |==========================================================                                       |  60%"
"1","  |                                                                                                       "
"1","  |===========================================================                                      |  61%"
"1","  |                                                                                                       "
"1","  |============================================================                                     |  62%"
"1","  |                                                                                                       "
"1","  |=============================================================                                    |  63%"
"1","  |                                                                                                       "
"1","  |==============================================================                                   |  64%"
"1","  |                                                                                                       "
"1","  |===============================================================                                  |  65%"
"1","  |                                                                                                       "
"1","  |================================================================                                 |  66%"
"1","  |                                                                                                       "
"1","  |=================================================================                                |  67%"
"1","  |                                                                                                       "
"1","  |==================================================================                               |  68%"
"1","  |                                                                                                       "
"1","  |===================================================================                              |  69%"
"1","  |                                                                                                       "
"1","  |====================================================================                             |  70%"
"1","  |                                                                                                       "
"1","  |====================================================================                             |  71%"
"1","  |                                                                                                       "
"1","  |=====================================================================                            |  72%"
"1","  |                                                                                                       "
"1","  |======================================================================                           |  73%"
"1","  |                                                                                                       "
"1","  |=======================================================================                          |  74%"
"1","  |                                                                                                       "
"1","  |========================================================================                         |  75%"
"1","  |                                                                                                       "
"1","  |=========================================================================                        |  75%"
"1","  |                                                                                                       "
"1","  |==========================================================================                       |  76%"
"1","  |                                                                                                       "
"1","  |===========================================================================                      |  77%"
"1","  |                                                                                                       "
"1","  |============================================================================                     |  78%"
"1","  |                                                                                                       "
"1","  |=============================================================================                    |  79%"
"1","  |                                                                                                       "
"1","  |==============================================================================                   |  80%"
"1","  |                                                                                                       "
"1","  |===============================================================================                  |  81%"
"1","  |                                                                                                       "
"1","  |================================================================================                 |  82%"
"1","  |                                                                                                       "
"1","  |=================================================================================                |  83%"
"1","  |                                                                                                       "
"1","  |==================================================================================               |  84%"
"1","  |                                                                                                       "
"1","  |===================================================================================              |  85%"
"1","  |                                                                                                       "
"1","  |====================================================================================             |  86%"
"1","  |                                                                                                       "
"1","  |=====================================================================================            |  87%"
"1","  |                                                                                                       "
"1","  |======================================================================================           |  88%"
"1","  |                                                                                                       "
"1","  |=======================================================================================          |  89%"
"1","  |                                                                                                       "
"1","  |========================================================================================         |  90%"
"1","  |                                                                                                       "
"1","  |========================================================================================         |  91%"
"1","  |                                                                                                       "
"1","  |=========================================================================================        |  92%"
"1","  |                                                                                                       "
"1","  |==========================================================================================       |  93%"
"1","  |                                                                                                       "
"1","  |===========================================================================================      |  94%"
"1","  |                                                                                                       "
"1","  |============================================================================================     |  95%"
"1","  |                                                                                                       "
"1","  |=============================================================================================    |  96%"
"1","  |                                                                                                       "
"1","  |==============================================================================================   |  97%"
"1","  |                                                                                                       "
"1","  |===============================================================================================  |  98%"
"1","  |                                                                                                       "
"1","  |================================================================================================ |  99%"
"1","  |                                                                                                       "
"1","  |=================================================================================================| 100%"
"1","
"
"0","# Standardize CRS"
"0","st_crs(pa_counties)"
"1","Coordinate Reference System:"
"1","
"
"1","  User input:"
"1"," "
"1","WGS 84 / Pseudo-Mercator"
"1"," "
"1","
"
"1","  wkt:
"
"1",""
"1","PROJCRS[""WGS 84 / Pseudo-Mercator"",
    BASEGEOGCRS[""WGS 84"",
        ENSEMBLE[""World Geodetic System 1984 ensemble"",
            MEMBER[""World Geodetic System 1984 (Transit)""],
            MEMBER[""World Geodetic System 1984 (G730)""],
            MEMBER[""World Geodetic System 1984 (G873)""],
            MEMBER[""World Geodetic System 1984 (G1150)""],
            MEMBER[""World Geodetic System 1984 (G1674)""],
            MEMBER[""World Geodetic System 1984 (G1762)""],
            MEMBER[""World Geodetic System 1984 (G2139)""],
            ELLIPSOID[""WGS 84"",6378137,298.257223563,
                LENGTHUNIT[""metre"",1]],
            ENSEMBLEACCURACY[2.0]],
        PRIMEM[""Greenwich"",0,
            ANGLEUNIT[""degree"",0.0174532925199433]],
        ID[""EPSG"",4326]],
    CONVERSION[""Popular Visualisation Pseudo-Mercator"",
        METHOD[""Popular Visualisation Pseudo Mercator"",
            ID[""EPSG"",1024]],
        PARAMETER[""Latitude of natural origin"",0,
            ANGLEUNIT[""degree"",0.0174532925199433],
            ID[""EPSG"",8801]],
        PARAMETER[""Longitude of natural origin"",0,
            ANGLEUNIT[""degree"",0.0174532925199433],
            ID[""EPSG"",8802]],
        PARAMETER[""False easting"",0,
            LENGTHUNIT[""metre"",1],
            ID[""EPSG"",8806]],
        PARAMETER[""False northing"",0,
            LENGTHUNIT[""metre"",1],
            ID[""EPSG"",8807]]],
    CS[Cartesian,2],
        AXIS[""easting (X)"",east,
            ORDER[1],
            LENGTHUNIT[""metre"",1]],
        AXIS[""northing (Y)"",north,
            ORDER[2],
            LENGTHUNIT[""metre"",1]],
    USAGE[
        SCOPE[""Web mapping and visualisation.""],
        AREA[""World between 85.06°S and 85.06°N.""],
        BBOX[-85.06,-180,85.06,180]],
    ID[""EPSG"",3857]]"
"1",""
"1","
"
"0","hospitals <- st_transform(hospitals, st_crs(pa_counties))"
"0","census_tracts <- st_transform(census_tracts, st_crs(pa_counties))"
"0",""
"0","# Check that all data loaded correctly"
"0","view(pa_counties)"
"0","view(hospitals)"
"0","view(census_tracts)"
