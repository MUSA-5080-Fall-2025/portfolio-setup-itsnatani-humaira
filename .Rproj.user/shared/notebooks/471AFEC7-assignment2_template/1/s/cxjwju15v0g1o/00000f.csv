"0","library(dplyr)"
"0","library(ggplot2)"
"0",""
"0","# Spatial join: assign crimes to schools via buffer intersection"
"0","crime_with_school <- st_join(crime, school_buffers, join = st_intersects, left = FALSE)"
"0",""
"0","# Count number of crimes per school"
"0","school_crime_counts <- crime_with_school %>%"
"0","  st_drop_geometry() %>%"
"0","  group_by(SCHOOL_NAME = school_nam) %>%"
"0","  summarise(crime_count = n()) %>%"
"0","  arrange(desc(crime_count))"
"0",""
"0","# View top 10 schools with most nearby crimes"
"0","head(school_crime_counts, 10)"
