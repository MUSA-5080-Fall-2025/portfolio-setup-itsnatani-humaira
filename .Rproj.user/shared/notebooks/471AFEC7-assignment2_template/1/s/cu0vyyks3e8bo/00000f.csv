"0","# Load required packages"
"0","library(sf)"
"0","library(tidyverse)"
"0","library(tigris)"
"0","library(tidycensus)"
"0","library(dplyr)"
"0","library(tidyr)"
"0","library(scales)"
"0","library(patchwork)"
"0","library(here)"
"0",""
"0","# Set your Census API key"
"0","census_api_key(Sys.getenv(""your_API_key""))"
"0",""
"0","# Load spatial data"
"0","pa_counties <- st_read(here(""C:/NATAN/PENN/2025 FALL/Public Policy Analytics/portfolio-setup-itsnatani-humaira/assignments/assignment2/scripts/data/Pennsylvania_County_Boundaries.shp""))"
"1","Reading layer `"
"1","Pennsylvania_County_Boundaries"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","C:\NATAN\PENN\2025 FALL\Public Policy Analytics\portfolio-setup-itsnatani-humaira\assignments\assignment2\scripts\data\Pennsylvania_County_Boundaries.shp"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","ESRI Shapefile"
"1","'"
"1","
"
"1","Simple feature collection with 67 features and 19 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -8963377 ymin: 4825316 xmax: -8314404 ymax: 5201413"
"1","
"
"1","Projected CRS: WGS 84 / Pseudo-Mercator
"
"0","hospitals <- st_read(here(""C:/NATAN/PENN/2025 FALL/Public Policy Analytics/portfolio-setup-itsnatani-humaira/assignments/assignment2/scripts/data/hospitals.geojson""))"
"1","Reading layer `"
"1","hospitals"
"1","' from data source "
"1","
"
"1","  "
"1","`"
"1","C:\NATAN\PENN\2025 FALL\Public Policy Analytics\portfolio-setup-itsnatani-humaira\assignments\assignment2\scripts\data\hospitals.geojson"
"1","' "
"1","
"
"1","  "
"1","using driver `"
"1","GeoJSON"
"1","'"
"1","
"
"1","Simple feature collection with 223 features and 11 fields"
"1","
"
"1","Geometry type: POINT
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -80.49621 ymin: 39.75163 xmax: -74.86704 ymax: 42.13403"
"1","
"
"1","Geodetic CRS:  WGS 84
"
"0","census_tracts <- tracts(state = ""PA"", cb = TRUE)"
"1","  |                                                                                                      "
"1","  |                                                                                                |   0%"
"1","  |                                                                                                      "
"1","  |==                                                                                              |   2%"
"1","  |                                                                                                      "
"1","  |====                                                                                            |   4%"
"1","  |                                                                                                      "
"1","  |=====                                                                                           |   5%"
"1","  |                                                                                                      "
"1","  |=====                                                                                           |   6%"
"1","  |                                                                                                      "
"1","  |======                                                                                          |   6%"
"1","  |                                                                                                      "
"1","  |========                                                                                        |   8%"
"1","  |                                                                                                      "
"1","  |=========                                                                                       |   9%"
"1","  |                                                                                                      "
"1","  |==========                                                                                      |  10%"
"1","  |                                                                                                      "
"1","  |============                                                                                    |  12%"
"1","  |                                                                                                      "
"1","  |=============                                                                                   |  13%"
"1","  |                                                                                                      "
"1","  |================                                                                                |  16%"
"1","  |                                                                                                      "
"1","  |===================                                                                             |  19%"
"1","  |                                                                                                      "
"1","  |=====================                                                                           |  22%"
"1","  |                                                                                                      "
"1","  |=======================                                                                         |  24%"
"1","  |                                                                                                      "
"1","  |========================                                                                        |  25%"
"1","  |                                                                                                      "
"1","  |==========================                                                                      |  27%"
"1","  |                                                                                                      "
"1","  |=============================                                                                   |  30%"
"1","  |                                                                                                      "
"1","  |===============================                                                                 |  32%"
"1","  |                                                                                                      "
"1","  |==================================                                                              |  35%"
"1","  |                                                                                                      "
"1","  |====================================                                                            |  38%"
"1","  |                                                                                                      "
"1","  |======================================                                                          |  40%"
"1","  |                                                                                                      "
"1","  |=========================================                                                       |  43%"
"1","  |                                                                                                      "
"1","  |============================================                                                    |  46%"
"1","  |                                                                                                      "
"1","  |==============================================                                                  |  48%"
"1","  |                                                                                                      "
"1","  |=================================================                                               |  51%"
"1","  |                                                                                                      "
"1","  |===================================================                                             |  53%"
"1","  |                                                                                                      "
"1","  |=====================================================                                           |  56%"
"1","  |                                                                                                      "
"1","  |======================================================                                          |  57%"
"1","  |                                                                                                      "
"1","  |=========================================================                                       |  60%"
"1","  |                                                                                                      "
"1","  |===========================================================                                     |  62%"
"1","  |                                                                                                      "
"1","  |==============================================================                                  |  64%"
"1","  |                                                                                                      "
"1","  |=================================================================                               |  67%"
"1","  |                                                                                                      "
"1","  |===================================================================                             |  69%"
"1","  |                                                                                                      "
"1","  |=====================================================================                           |  72%"
"1","  |                                                                                                      "
"1","  |=======================================================================                         |  74%"
"1","  |                                                                                                      "
"1","  |==========================================================================                      |  77%"
"1","  |                                                                                                      "
"1","  |===========================================================================                     |  78%"
"1","  |                                                                                                      "
"1","  |==============================================================================                  |  81%"
"1","  |                                                                                                      "
"1","  |===============================================================================                 |  82%"
"1","  |                                                                                                      "
"1","  |==================================================================================              |  85%"
"1","  |                                                                                                      "
"1","  |=====================================================================================           |  88%"
"1","  |                                                                                                      "
"1","  |======================================================================================          |  90%"
"1","  |                                                                                                      "
"1","  |=========================================================================================       |  93%"
"1","  |                                                                                                      "
"1","  |============================================================================================    |  96%"
"1","  |                                                                                                      "
"1","  |================================================================================================| 100%"
"1","
"
"0","# Standardize CRS"
"0","st_crs(pa_counties)"
"1","Coordinate Reference System:"
"1","
"
"1","  User input:"
"1"," "
"1","WGS 84 / Pseudo-Mercator"
"1"," "
"1","
"
"1","  wkt:
"
"1",""
"1","PROJCRS[""WGS 84 / Pseudo-Mercator"",
    BASEGEOGCRS[""WGS 84"",
        ENSEMBLE[""World Geodetic System 1984 ensemble"",
            MEMBER[""World Geodetic System 1984 (Transit)""],
            MEMBER[""World Geodetic System 1984 (G730)""],
            MEMBER[""World Geodetic System 1984 (G873)""],
            MEMBER[""World Geodetic System 1984 (G1150)""],
            MEMBER[""World Geodetic System 1984 (G1674)""],
            MEMBER[""World Geodetic System 1984 (G1762)""],
            MEMBER[""World Geodetic System 1984 (G2139)""],
            ELLIPSOID[""WGS 84"",6378137,298.257223563,
                LENGTHUNIT[""metre"",1]],
            ENSEMBLEACCURACY[2.0]],
        PRIMEM[""Greenwich"",0,
            ANGLEUNIT[""degree"",0.0174532925199433]],
        ID[""EPSG"",4326]],
    CONVERSION[""Popular Visualisation Pseudo-Mercator"",
        METHOD[""Popular Visualisation Pseudo Mercator"",
            ID[""EPSG"",1024]],
        PARAMETER[""Latitude of natural origin"",0,
            ANGLEUNIT[""degree"",0.0174532925199433],
            ID[""EPSG"",8801]],
        PARAMETER[""Longitude of natural origin"",0,
            ANGLEUNIT[""degree"",0.0174532925199433],
            ID[""EPSG"",8802]],
        PARAMETER[""False easting"",0,
            LENGTHUNIT[""metre"",1],
            ID[""EPSG"",8806]],
        PARAMETER[""False northing"",0,
            LENGTHUNIT[""metre"",1],
            ID[""EPSG"",8807]]],
    CS[Cartesian,2],
        AXIS[""easting (X)"",east,
            ORDER[1],
            LENGTHUNIT[""metre"",1]],
        AXIS[""northing (Y)"",north,
            ORDER[2],
            LENGTHUNIT[""metre"",1]],
    USAGE[
        SCOPE[""Web mapping and visualisation.""],
        AREA[""World between 85.06°S and 85.06°N.""],
        BBOX[-85.06,-180,85.06,180]],
    ID[""EPSG"",3857]]"
"1",""
"1","
"
"0","hospitals <- st_transform(hospitals, st_crs(pa_counties))"
"0","census_tracts <- st_transform(census_tracts, st_crs(pa_counties))"
"0",""
"0","# Check that all data loaded correctly"
"0","head(pa_counties)"
"1","Simple feature collection with 6 features and 19 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -8905670 ymin: 4862594 xmax: -8317930 ymax: 5161279"
"1","
"
"1","Projected CRS: WGS 84 / Pseudo-Mercator
"
"1"," "
"1"," OBJECTID"
"1"," MSLINK"
"1"," COUNTY_NAM"
"1"," COUNTY_NUM"
"1"," FIPS_COUNT"
"1"," COUNTY_ARE"
"1"," COUNTY_PER"
"1"," NUMERIC_LA"
"1"," COUNTY_N_1"
"1"," AREA_SQ_MI"
"1","
1"
"1","      336"
"1","     46"
"1"," MONTGOMERY"
"1","         46"
"1","        091"
"1","       <NA>"
"1","       <NA>"
"1","          5"
"1","         46"
"1","   487.4271"
"1","
2"
"1","      337"
"1","      8"
"1","   BRADFORD"
"1","         08"
"1","        015"
"1","       <NA>"
"1","       <NA>"
"1","          2"
"1","          8"
"1","  1161.3379"
"1","
3"
"1","      338"
"1","      9"
"1","      BUCKS"
"1","         09"
"1","        017"
"1","       <NA>"
"1","       <NA>"
"1","          5"
"1","          9"
"1","   622.0836"
"1","
4"
"1","      339"
"1","     58"
"1","      TIOGA"
"1","         58"
"1","        117"
"1","       <NA>"
"1","       <NA>"
"1","          2"
"1","         58"
"1","  1137.2480"
"1","
5"
"1","      340"
"1","     59"
"1","      UNION"
"1","         59"
"1","        119"
"1","       <NA>"
"1","       <NA>"
"1","          2"
"1","         59"
"1","   319.1893"
"1","
6"
"1","      341"
"1","     60"
"1","    VENANGO"
"1","         60"
"1","        121"
"1","       <NA>"
"1","       <NA>"
"1","          3"
"1","         60"
"1","   683.3676"
"1","
"
"1"," "
"1"," SOUND"
"1"," SPREAD_SHE"
"1"," IMAGE_NAME"
"1"," NOTE_FILE"
"1"," VIDEO"
"1"," DISTRICT_N"
"1"," PA_CTY_COD"
"1"," MAINT_CTY_"
"1"," DISTRICT_O"
"1","
1"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         06"
"1","         46"
"1","          4"
"1","        6-4"
"1","
2"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         03"
"1","         08"
"1","          9"
"1","        3-9"
"1","
3"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         06"
"1","         09"
"1","          1"
"1","        6-1"
"1","
4"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         03"
"1","         59"
"1","          7"
"1","        3-7"
"1","
5"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         03"
"1","         60"
"1","          8"
"1","        3-8"
"1","
6"
"1","  <NA>"
"1","       <NA>"
"1","   poll.bmp"
"1","      <NA>"
"1","  <NA>"
"1","         01"
"1","         61"
"1","          5"
"1","        1-5"
"1","
"
"1"," "
"1","                       geometry"
"1","
1"
"1"," MULTIPOLYGON (((-8398884 48..."
"1","
2"
"1"," MULTIPOLYGON (((-8558633 51..."
"1","
3"
"1"," MULTIPOLYGON (((-8367360 49..."
"1","
4"
"1"," MULTIPOLYGON (((-8558633 51..."
"1","
5"
"1"," MULTIPOLYGON (((-8562865 49..."
"1","
6"
"1"," MULTIPOLYGON (((-8870781 50..."
"1","
"
"0","head(hospitals)"
"1","Simple feature collection with 6 features and 11 fields"
"1","
"
"1","Geometry type: POINT
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -8936626 ymin: 4838244 xmax: -8367892 ymax: 4901278"
"1","
"
"1","Projected CRS: WGS 84 / Pseudo-Mercator
"
"1"," "
"1","                CHIEF_EXEC"
"1","              CHIEF_EX_1"
"1","                     FACILITY_U"
"1"," LONGITUDE"
"1","       COUNTY"
"1","
1"
"1","             Peter J Adamo"
"1","               President"
"1","   https://www.phhealthcare.org"
"1"," -79.91131"
"1","   Washington"
"1","
2"
"1","          Autumn DeShields"
"1"," Chief Executive Officer"
"1","      https://www.malvernbh.com"
"1"," -75.17005"
"1"," Philadelphia"
"1","
3"
"1","              Shawn Parekh"
"1"," Chief Executive Officer"
"1"," https://roxboroughmemorial.com"
"1"," -75.20963"
"1"," Philadelphia"
"1","
4"
"1","               DIANE HRITZ"
"1"," Chief Executive Officer"
"1","     https://www.ashospital.net"
"1"," -80.27907"
"1","   Washington"
"1","
5"
"1","            Tim Harclerode"
"1"," Chief Executive Officer"
"1","      https://www.conemaugh.org"
"1"," -79.02513"
"1","     Somerset"
"1","
6"
"1"," Richard McLaughlin MD MBA"
"1"," Chief Executive Officer"
"1","        https://towerhealth.org"
"1"," -75.61213"
"1","   Montgomery"
"1","
"
"1"," "
"1","                              FACILITY_N"
"1","                         STREET"
"1","   CITY_OR_BO"
"1"," LATITUDE"
"1","
1"
"1","               Penn Highlands Mon Valley"
"1","         1163 Country Club Road"
"1","  Monongahela"
"1"," 40.18193"
"1","
2"
"1","               MALVERN BEHAVIORAL HEALTH"
"1"," 1930 South Broad Street Unit 4"
"1"," Philadelphia"
"1"," 39.92619"
"1","
3"
"1","            Roxborough Memorial Hospital"
"1","              5800 Ridge Avenue"
"1"," Philadelphia"
"1"," 40.02869"
"1","
4"
"1","              ADVANCED SURGICAL HOSPITAL"
"1","       100 TRICH DRIVE\nSUITE 1"
"1","   WASHINGTON"
"1"," 40.15655"
"1","
5"
"1"," DLP Conemaugh Meyersdale Medical Center"
"1","             200 Hospital Drive"
"1","   Meyersdale"
"1"," 39.80913"
"1","
6"
"1","                 Pottstown Hospital, LLC"
"1","          1600 East High Street"
"1","    Pottstown"
"1"," 40.24273"
"1","
"
"1"," "
"1","   TELEPHONE_"
"1"," ZIP_CODE"
"1","                 geometry"
"1","
1"
"1"," 724-258-1000"
"1","    15063"
"1"," POINT (-8895686 4892415)"
"1","
2"
"1"," 610-480-8919"
"1","    19145"
"1"," POINT (-8367892 4855223)"
"1","
3"
"1"," 215-483-9900"
"1","    19128"
"1"," POINT (-8372298 4870112)"
"1","
4"
"1","   7248840710"
"1","    15301"
"1"," POINT (-8936626 4888717)"
"1","
5"
"1"," 814-634-5911"
"1","    15552"
"1"," POINT (-8797037 4838244)"
"1","
6"
"1","   6103277000"
"1","    19464"
"1"," POINT (-8417104 4901278)"
"1","
"
"0","head(census_tracts)"
"1","Simple feature collection with 6 features and 13 fields"
"1","
"
"1","Geometry type: MULTIPOLYGON
"
"1","Dimension:     XY
"
"1","Bounding box:  "
"1","xmin: -8730207 ymin: 4835980 xmax: -8446959 ymax: 4945207"
"1","
"
"1","Projected CRS: WGS 84 / Pseudo-Mercator
"
"1"," "
"1"," STATEFP"
"1"," COUNTYFP"
"1"," TRACTCE"
"1","             AFFGEOID"
"1","       GEOID"
"1","   NAME"
"1","            NAMELSAD"
"1"," STUSPS"
"1","
1"
"1","      42"
"1","      001"
"1","  031101"
"1"," 1400000US42001031101"
"1"," 42001031101"
"1"," 311.01"
"1"," Census Tract 311.01"
"1","     PA"
"1","
2"
"1","      42"
"1","      013"
"1","  100400"
"1"," 1400000US42013100400"
"1"," 42013100400"
"1","   1004"
"1","   Census Tract 1004"
"1","     PA"
"1","
3"
"1","      42"
"1","      013"
"1","  100300"
"1"," 1400000US42013100300"
"1"," 42013100300"
"1","   1003"
"1","   Census Tract 1003"
"1","     PA"
"1","
4"
"1","      42"
"1","      013"
"1","  100800"
"1"," 1400000US42013100800"
"1"," 42013100800"
"1","   1008"
"1","   Census Tract 1008"
"1","     PA"
"1","
5"
"1","      42"
"1","      011"
"1","  000100"
"1"," 1400000US42011000100"
"1"," 42011000100"
"1","      1"
"1","      Census Tract 1"
"1","     PA"
"1","
6"
"1","      42"
"1","      011"
"1","  012200"
"1"," 1400000US42011012200"
"1"," 42011012200"
"1","    122"
"1","    Census Tract 122"
"1","     PA"
"1","
"
"1"," "
"1","   NAMELSADCO"
"1","   STATE_NAME"
"1"," LSAD"
"1","   ALAND"
"1"," AWATER"
"1","                       geometry"
"1","
1"
"1"," Adams County"
"1"," Pennsylvania"
"1","   CT"
"1"," 3042633"
"1","      0"
"1"," MULTIPOLYGON (((-8575060 48..."
"1","
2"
"1"," Blair County"
"1"," Pennsylvania"
"1","   CT"
"1","  993724"
"1","      0"
"1"," MULTIPOLYGON (((-8730207 49..."
"1","
3"
"1"," Blair County"
"1"," Pennsylvania"
"1","   CT"
"1"," 1217046"
"1","      0"
"1"," MULTIPOLYGON (((-8730052 49..."
"1","
4"
"1"," Blair County"
"1"," Pennsylvania"
"1","   CT"
"1","  996553"
"1","      0"
"1"," MULTIPOLYGON (((-8728636 49..."
"1","
5"
"1"," Berks County"
"1"," Pennsylvania"
"1","   CT"
"1","  807871"
"1","      0"
"1"," MULTIPOLYGON (((-8452688 49..."
"1","
6"
"1"," Berks County"
"1"," Pennsylvania"
"1","   CT"
"1"," 2788188"
"1","  30830"
"1"," MULTIPOLYGON (((-8450166 49..."
"1","
"
